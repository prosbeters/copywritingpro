<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CopyGen Pro - Professional Strategic Engine</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & Babel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0A0A0C;
            color: #FFFFFF;
            margin: 0;
            overflow-x: hidden;
        }

        .custom-scrollbar::-webkit-scrollbar { width: 3px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.3); border-radius: 10px; }

        @keyframes fade-in { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fade-in 0.4s ease-out forwards; }

        .glass-panel {
            background: #111114;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);
        }
        
        .font-serif { font-family: 'Playfair+Display', serif; }

        .tooltip-box {
            visibility: hidden;
            opacity: 0;
            transform: translate(-50%, 10px);
            transition: all 0.2s ease-out;
        }
        .group-hover-tooltip:hover .tooltip-box {
            visibility: visible;
            opacity: 1;
            transform: translate(-50%, 0px);
        }

        .glow-brand {
            color: #FFFFFF;
            font-weight: 800;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.9);
            letter-spacing: 0.1em;
        }

        .text-justify-custom {
            text-align: justify;
            text-justify: inter-word;
        }

        .input-clean {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            transition: all 0.3s;
        }
        .input-clean:focus {
            border-color: rgba(255, 255, 255, 0.5);
            outline: none;
            background: rgba(255, 255, 255, 0.07);
        }
        
        ::placeholder {
            color: rgba(255, 255, 255, 0.3) !important;
        }

        /* Toast Animation */
        @keyframes slide-up {
            from { transform: translate(-50%, 100%); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }
        .toast-active {
            animation: slide-up 0.4s ease-out forwards;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, Fragment } = React;

        const exampleOptions = {
            audience: ["Pebisnis Muda", "Ibu Rumah Tangga", "Karyawan Kantor", "Mahasiswa", "Freelancer"],
            tone: ["Profesional & Berwibawa", "Santai & Friendly", "Mendesak (FOMO)", "Emosional & Storytelling", "Jenaka"],
            platform: ["Instagram Caption", "Facebook Ads", "Landing Page Copy", "WhatsApp Blast", "TikTok Script"]
        };

        const formulas = [
            { id: 'acc', name: 'ACC', fullName: 'Awareness, Comprehension, Conversion', icon: 'target', strategyInfo: 'Membangun kesadaran, pemahaman produk, hingga tindakan beli.' },
            { id: '4cs', name: '4Cs', fullName: 'Clear, Concise, Compelling, Credible', icon: 'check', strategyInfo: 'Fokus pada kejelasan, keringkasan, daya tarik, dan kredibilitas.' },
            { id: 'aida', name: 'AIDA', fullName: 'Attention, Interest, Desire, Action', icon: 'heart', strategyInfo: 'Alur klasik: Perhatian, Minat, Hasrat, dan Tindakan.' },
            { id: 'pas', name: 'PAS', fullName: 'Problem, Agitate, Solution', icon: 'alert', strategyInfo: 'Menyorot masalah, mempertajam keresahan, lalu beri solusi.' },
            { id: 'fab', name: 'FAB', fullName: 'Features, Advantage, Benefits', icon: 'box', strategyInfo: 'Fokus pada fitur produk, keunggulan, dan manfaat bagi konsumen.' },
            { id: 'slap', name: 'SLAP', fullName: 'Stop, Look, Act, Purchase', icon: 'hand', strategyInfo: 'Agresif untuk menghentikan scroll dan memaksa tindakan cepat.' }
        ];

        const BackgroundEffects = () => (
            <div className="fixed inset-0 z-0 pointer-events-none overflow-hidden bg-[#0A0A0C]">
                <div className="absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-white/5 rounded-full blur-[120px] opacity-40 animate-pulse"></div>
                <div className="absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-white/5 rounded-full blur-[120px] opacity-40 animate-pulse" style={{animationDelay: '2s'}}></div>
            </div>
        );

        const Icon = ({ name, className = "w-4 h-4" }) => {
            const icons = {
                crown: <path d="m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14" />,
                zap: <path d="M13 2 L3 14h9l-1 8 10-12h-9l1-8z" />,
                target: <Fragment><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></Fragment>,
                heart: <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" />,
                alert: <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3ZM12 9v4M12 17h.01" />,
                box: <Fragment><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/></Fragment>,
                hand: <Fragment><path d="M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"/><path d="M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"/><path d="M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"/><path d="M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"/><path d="M14 11V9"/></Fragment>,
                info: <Fragment><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></Fragment>,
                layers: <Fragment><path d="m12.83 2.18a2 2 0 0 0-1.66 0L2.1 6.8a2 2 0 0 0 0 3.6L11.17 15a2 2 0 0 0 1.66 0L21.9 10.4a2 2 0 0 0 0-3.6Z"/><path d="m2 14.6 10 5.2 10-5.2"/><path d="m2 18.6 10 5.2 10-5.2"/></Fragment>,
                lightbulb: <Fragment><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A5 5 0 0 0 8 8c0 1.3.5 2.6 1.5 3.5.8.8 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></Fragment>,
                download: <Fragment><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></Fragment>,
                logout: <Fragment><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" x2="9" y1="12" y2="12"/></Fragment>,
                help: <Fragment><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></Fragment>,
                copy: <Fragment><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></Fragment>,
                check: <polyline points="20 6 9 17 4 12"/>,
                x: <path d="M18 6 6 18M6 6l12 12" />,
                chevronDown: <path d="m6 9 6 6 6-6" />,
                trash: <path d="M3 6h18m-2 0v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" />
            };
            return (
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    {icons[name] || <circle cx="12" cy="12" r="10" />}
                </svg>
            );
        };

        const FormInput = ({ label, name, value, onChange, placeholder, isTextArea = false, examples = [], info = "" }) => {
            const [showDropdown, setShowDropdown] = useState(false);
            const wrapperRef = useRef(null);

            useEffect(() => {
                const handleClickOutside = (e) => { if (wrapperRef.current && !wrapperRef.current.contains(e.target)) setShowDropdown(false); };
                document.addEventListener("mousedown", handleClickOutside);
                return () => document.removeEventListener("mousedown", handleClickOutside);
            }, []);

            return (
                <div className="group animate-fade-in relative mb-5" ref={wrapperRef} style={{ position: 'relative', zIndex: showDropdown ? 100 : 1 }}>
                    <div className="flex items-center gap-1.5 mb-1.5">
                        <label className="text-[10px] font-bold text-white uppercase tracking-widest">{label}</label>
                        {info && (
                            <div className="relative group/tooltip group-hover-tooltip cursor-help">
                                <Icon name="info" className="w-3 h-3 text-white transition-colors" />
                                <div className="tooltip-box absolute bottom-full left-1/2 mb-2 w-56 p-3 bg-white border border-black rounded-xl shadow-2xl z-[110] text-black text-center">
                                    <p className="text-[10px] leading-relaxed font-bold">{info}</p>
                                </div>
                            </div>
                        )}
                    </div>
                    <div className="relative">
                        {isTextArea ? (
                            <textarea name={name} value={value} onChange={onChange} placeholder={placeholder} className="w-full input-clean rounded-xl py-3 px-4 text-sm text-white h-28 resize-none transition-all scrollbar-thin" />
                        ) : (
                            <input 
                                type="text" 
                                name={name} 
                                value={value} 
                                onChange={onChange} 
                                onFocus={() => examples?.length > 0 && setShowDropdown(true)} 
                                placeholder={placeholder} 
                                autoComplete="off" 
                                className="w-full input-clean rounded-xl py-3.5 px-4 pr-10 text-sm text-white" 
                            />
                        )}
                        {examples?.length > 0 && (
                            <div className="absolute right-3 top-3.5 text-white cursor-pointer p-1" onClick={() => setShowDropdown(!showDropdown)}>
                                <Icon name="chevronDown" className={`w-4 h-4 transition-transform ${showDropdown ? 'rotate-180' : ''}`} />
                            </div>
                        )}
                        {showDropdown && (
                            <div className="absolute z-[120] w-full mt-1 bg-[#18181B] border border-white/20 rounded-xl shadow-2xl overflow-hidden animate-fade-in origin-top">
                                <div className="max-h-52 overflow-y-auto custom-scrollbar p-1">
                                    {examples.map((ex, i) => (
                                        <button 
                                            key={i} 
                                            type="button" 
                                            onMouseDown={(e) => {
                                                e.preventDefault();
                                                onChange({ target: { name, value: ex } });
                                                setShowDropdown(false);
                                            }} 
                                            className="w-full text-left text-xs text-white hover:bg-white/10 p-3 rounded-lg flex items-center gap-2 transition-colors"
                                        >
                                            <div className="w-1 h-1 rounded-full bg-white" />{ex}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const App = () => {
            const [apiKey, setApiKey] = useState('');
            const [isAuthed, setIsAuthed] = useState(false);
            const [loading, setLoading] = useState(true);
            const [validating, setValidating] = useState(false);
            const [error, setError] = useState('');
            const [showTutorial, setShowTutorial] = useState(false);
            const [formData, setFormData] = useState({ productName: '', audience: '', tone: '', platform: '', problem: '', solution: '', offer: '' });
            const [selectedFormula, setSelectedFormula] = useState(null);
            const [results, setResults] = useState([]);
            const [isGenerating, setIsGenerating] = useState(false);
            const [copiedIdx, setCopiedIdx] = useState(null);
            const [toast, setToast] = useState({ show: false, message: "" });

            useEffect(() => {
                const saved = localStorage.getItem('copygen_pro_v3_key');
                if (saved) {
                    setApiKey(saved);
                    setIsAuthed(true);
                }
                setLoading(false);
            }, []);

            const showToast = (message) => {
                setToast({ show: true, message });
                setTimeout(() => setToast({ show: false, message: "" }), 5000);
            };

            const triggerSwitchKeyUI = () => {
                localStorage.removeItem('copygen_pro_v3_key');
                setApiKey('');
                setIsAuthed(false);
                setResults([]);
            };

            const validateKey = async (e) => {
                e.preventDefault();
                const key = e.target.apiKey.value.trim();
                if (!key) return;
                setValidating(true);
                setError('');
                try {
                    const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${key}`, {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({contents: [{parts:[{text: "Validate"}]}]})
                    });
                    if (!res.ok) throw new Error();
                    localStorage.setItem('copygen_pro_v3_key', key);
                    setApiKey(key);
                    setIsAuthed(true);
                } catch {
                    setError('Kunci Akses tidak valid atau bermasalah.');
                } finally { setValidating(false); }
            };

            const handleInputChange = e => {
                const { name, value } = e.target;
                setFormData(prev => ({...prev, [name]: value}));
            };

            const generateContent = async () => {
                if (!apiKey || !selectedFormula) return;
                setIsGenerating(true);
                try {
                    const formula = formulas.find(f => f.id === selectedFormula);
                    const prompt = `
                        As an Expert Conversion Copywriter. 
                        Create 15 professional copywriting variations in Indonesian.
                        Brand: "${formData.productName}".
                        Context: ${JSON.stringify(formData)}.
                        Formula: ${formula.fullName}.
                        Instructions: Be authoritative, persuasive, and deep. 
                        Rule: Output MUST be a valid JSON array of objects: [{"text": "...", "analysis": "..."}].
                        Style: Professional text-align: justify.
                    `;

                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }], generationConfig: {responseMimeType: "application/json"} })
                    });

                    if (response.status === 429) {
                        showToast("KUOTA KEY HABIS! Silakan ganti dengan API Key cadangan.");
                        triggerSwitchKeyUI();
                        return;
                    }

                    if (!response.ok) throw new Error("API Error");

                    const data = await response.json();
                    const aiContent = JSON.parse(data.candidates[0].content.parts[0].text);
                    setResults(Array.isArray(aiContent) ? aiContent : []);
                } catch(e) { 
                    console.error(e); 
                    showToast("Gagal memproses. Cek koneksi atau coba lagi nanti.");
                } finally { setIsGenerating(false); }
            };

            const downloadWord = () => {
                const styles = `
                    <style>
                        body { font-family: 'Arial', sans-serif; line-height: 1.6; color: #333; }
                        h2 { color: #1a1a1a; text-align: center; border-bottom: 2px solid #eee; padding-bottom: 10px; }
                        .item { margin-bottom: 30px; padding: 15px; border: 1px solid #eee; }
                        .text { font-size: 12pt; text-align: justify; margin-bottom: 10px; white-space: pre-wrap; }
                        .analysis { font-size: 10pt; color: #666; font-style: italic; text-align: justify; background: #f9f9f9; padding: 10px; }
                    </style>
                `;
                const content = `
                    <html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
                    <head><meta charset='utf-8'>${styles}</head>
                    <body>
                        <h2>CopyGen Pro - Strategic Report</h2>
                        ${results.map((item, i) => `
                            <div class='item'>
                                <p><b>Variasi #${i+1}</b></p>
                                <div class='text'>${String(item.text)}</div>
                                <div class='analysis'>Analisis Strategi: ${String(item.analysis)}</div>
                            </div>
                        `).join('')}
                    </body>
                    </html>
                `;
                const blob = new Blob(['\ufeff', content], { type: 'application/msword' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `CopyGen_Strategy_${formData.productName || 'Export'}.doc`;
                link.click();
            };

            const handleCopy = (text, i) => {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                setCopiedIdx(i);
                setTimeout(() => setCopiedIdx(null), 2000);
            };

            if (loading) return null;

            if (!isAuthed) return (
                <div className="min-h-screen flex flex-col items-center justify-center p-4 bg-[#0A0A0C] relative text-white">
                    <BackgroundEffects />
                    <div className="relative z-10 w-full max-w-md glass-panel rounded-3xl p-10 text-center">
                        <Icon name="crown" className="w-12 h-12 text-white mx-auto mb-6" />
                        <h1 className="text-3xl font-bold mb-1 font-serif italic text-white">CopyGen Pro</h1>
                        <p className="text-[10px] text-white/50 uppercase tracking-[0.3em] mb-10">Strategic Copy Engine</p>
                        
                        <form onSubmit={validateKey} className="space-y-6 text-left">
                            <div className="space-y-2">
                                <div className="flex justify-between items-end">
                                    <label className="text-[9px] font-bold text-white uppercase tracking-widest ml-1">Kunci Akses Google AI</label>
                                    <button type="button" onClick={() => setShowTutorial(true)} className="text-[9px] text-white hover:underline uppercase font-bold tracking-tighter">Tutorial</button>
                                </div>
                                <input name="apiKey" type="password" required className="w-full input-clean rounded-xl p-4 text-sm text-white" placeholder="Masukkan API Key..." />
                            </div>
                            {error && <p className="text-red-500 text-[10px] text-center animate-fade-in font-bold">{error}</p>}
                            <button type="submit" disabled={validating} className="w-full bg-white text-black py-4 rounded-xl font-bold uppercase text-[10px] tracking-[0.2em] transition-all hover:bg-gray-200 active:scale-95">
                                {validating ? 'Memverifikasi...' : 'Aktifkan Sistem'}
                            </button>
                        </form>

                        <div className="mt-14 border-t border-white/10 pt-8">
                            <p className="glow-brand text-sm uppercase">Made by ProSbe</p>
                        </div>
                    </div>

                    {showTutorial && (
                        <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/95 animate-fade-in">
                            <div className="glass-panel w-full max-w-md rounded-3xl p-8 relative border-white/20">
                                <button onClick={() => setShowTutorial(false)} className="absolute top-6 right-6 text-white hover:opacity-70"><Icon name="x" className="w-5 h-5" /></button>
                                <h2 className="text-xl font-bold mb-8 font-serif italic text-white">Dapatkan API Key</h2>
                                <div className="space-y-5 text-left text-white">
                                    {["Buka aistudio.google.com", "Login akun Google", "Klik 'Get API key'", "Pilih 'Create API key in new project'", "Salin kodenya ke sini"].map((step, i) => (
                                        <div key={i} className="flex gap-4 items-center">
                                            <div className="w-6 h-6 rounded-full bg-white/10 text-white text-[10px] font-bold flex items-center justify-center border border-white/30">{i + 1}</div>
                                            <p className="text-sm">{step}</p>
                                        </div>
                                    ))}
                                </div>
                                <button onClick={() => setShowTutorial(false)} className="mt-10 w-full bg-white text-black py-3 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:bg-gray-200">Tutup Panduan</button>
                            </div>
                        </div>
                    )}
                </div>
            );

            return (
                <div className="min-h-screen bg-[#0A0A0C] text-white">
                    <BackgroundEffects />
                    <nav className="sticky top-0 z-50 glass-panel border-b border-white/10 px-6 py-4 flex justify-between items-center backdrop-blur-xl">
                        <div className="flex items-center gap-3">
                            <Icon name="crown" className="text-white w-5 h-5" />
                            <div>
                                <h1 className="text-lg font-bold font-serif italic text-white">CopyGen Pro</h1>
                                <p className="text-[8px] text-white/70 uppercase tracking-widest">Powered by ProSbe</p>
                            </div>
                        </div>
                        <button onClick={triggerSwitchKeyUI} className="text-[9px] font-bold text-white/50 flex items-center gap-2 hover:text-red-400 transition-all border border-white/10 px-4 py-2 rounded-lg uppercase tracking-widest bg-white/5">
                            <Icon name="trash" className="w-3 h-3" /> Hapus Kunci
                        </button>
                    </nav>

                    <main className="max-w-7xl mx-auto p-4 md:p-8 grid grid-cols-1 lg:grid-cols-12 gap-8 relative z-10">
                        <div className="lg:col-span-5 space-y-6">
                            <div className="glass-panel rounded-2xl p-8 space-y-8">
                                <div>
                                    <h2 className="text-[10px] font-bold text-white uppercase tracking-[0.2em] mb-5 flex items-center gap-2 font-serif italic">1. Strategi Pemasaran</h2>
                                    <div className="grid grid-cols-3 gap-2">
                                        {formulas.map(f => (
                                            <button key={f.id} onClick={()=>setSelectedFormula(f.id)} className={`p-3 rounded-xl border text-center transition-all relative group/formula ${selectedFormula === f.id ? 'bg-white border-white' : 'bg-transparent border-white/10 hover:border-white/30'}`}>
                                                <div className="absolute top-1 right-1 group-hover-tooltip group/info">
                                                    <Icon name="info" className={`w-3 h-3 ${selectedFormula === f.id ? 'text-black/50' : 'text-white/60'}`} />
                                                    <div className="tooltip-box absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 p-3 bg-white text-black rounded-lg shadow-2xl z-[100]">
                                                        <p className="text-[9px] font-bold uppercase mb-1">{f.fullName}</p>
                                                        <p className="text-[9px] leading-relaxed font-bold opacity-80">{f.strategyInfo}</p>
                                                    </div>
                                                </div>
                                                <div className={`mb-1 flex justify-center ${selectedFormula === f.id ? 'text-black' : 'text-white'}`}><Icon name={f.icon} /></div>
                                                <span className={`text-[8px] font-bold block ${selectedFormula === f.id ? 'text-black' : 'text-white'}`}>{f.name}</span>
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                <div className="space-y-1 border-t border-white/10 pt-8">
                                    <h2 className="text-[10px] font-bold text-white uppercase tracking-[0.2em] mb-5 flex items-center gap-2 font-serif italic">2. Data Otoritas Produk</h2>
                                    <FormInput label="Nama Brand" name="productName" value={formData.productName} onChange={handleInputChange} placeholder="Kopi Kenangan" info="AI akan menyuntikkan data pengetahuan kategori produk ini." />
                                    <FormInput label="Target Pasar" name="audience" value={formData.audience} onChange={handleInputChange} placeholder="Pekerja Kantoran" examples={exampleOptions.audience} />
                                    <FormInput label="Gaya Bahasa" name="tone" value={formData.tone} onChange={handleInputChange} placeholder="Profesional" examples={exampleOptions.tone} />
                                    <FormInput label="Platform" name="platform" value={formData.platform} onChange={handleInputChange} placeholder="Instagram Ads" examples={exampleOptions.platform} />
                                    <FormInput label="Masalah Utama" name="problem" value={formData.problem} onChange={handleInputChange} isTextArea placeholder="Penderitaan konsumen..." />
                                    <FormInput label="Solusi Produk" name="solution" value={formData.solution} onChange={handleInputChange} isTextArea placeholder="Cara Anda membantu mereka..." />
                                    <FormInput label="Penawaran" name="offer" value={formData.offer} onChange={handleInputChange} isTextArea placeholder="Bonus / Diskon / Testimoni..." />
                                    
                                    <button onClick={generateContent} disabled={!selectedFormula || isGenerating} className={`w-full py-4 rounded-xl font-bold mt-4 uppercase text-[10px] tracking-[0.3em] transition-all flex items-center justify-center gap-3 ${!selectedFormula || isGenerating ? 'bg-white/10 text-white/30' : 'bg-white text-black hover:bg-gray-200 active:scale-95'}`}>
                                        {isGenerating ? <div className="w-3 h-3 border-2 border-black/20 border-t-black rounded-full animate-spin" /> : <Icon name="zap" className="w-3 h-3" />}
                                        {isGenerating ? 'Menganalisis...' : 'Hasilkan Masterpiece'}
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div className="lg:col-span-7">
                            <div className="glass-panel rounded-3xl flex flex-col min-h-[850px] overflow-hidden border-white/10">
                                <div className="p-8 border-b border-white/10 flex justify-between items-center bg-white/[0.03]">
                                    <div className="flex items-center gap-4">
                                        <div className="p-2 bg-white/10 rounded-xl"><Icon name="zap" className="text-white w-4 h-4" /></div>
                                        <div>
                                            <h2 className="text-lg font-bold font-serif italic text-white">Arsip Strategi</h2>
                                            <p className="text-[9px] text-white/50 uppercase tracking-widest">15 Variasi Berkualitas Tinggi</p>
                                        </div>
                                    </div>
                                    {results.length > 0 && <button onClick={downloadWord} className="bg-white text-black px-5 py-2 rounded-xl text-[9px] font-bold flex items-center gap-2 uppercase tracking-widest hover:bg-gray-200 transition-all"><Icon name="download" className="w-3 h-3" /> Ekspor .doc</button>}
                                </div>
                                <div className="p-8 space-y-8 overflow-y-auto custom-scrollbar flex-grow">
                                    {results.length === 0 ? (
                                        <div className="h-full flex flex-col items-center justify-center py-40 opacity-20 text-center space-y-6">
                                            <Icon name="box" className="w-24 h-24 text-white" />
                                            <p className="max-w-xs text-[10px] font-bold uppercase tracking-[0.3em] text-white">Siap Untuk Bekerja Pintar</p>
                                        </div>
                                    ) : (
                                        results.map((item, i) => (
                                            <div key={i} className="group relative bg-white/[0.02] border border-white/5 rounded-2xl p-8 hover:border-white/20 transition-all duration-500 animate-fade-in">
                                                <div className="absolute top-6 right-8 text-[8px] font-bold text-white/30 uppercase tracking-widest">Opsi {i+1}</div>
                                                <p className="text-white text-base leading-relaxed mb-8 text-justify-custom whitespace-pre-wrap font-medium">{String(item.text)}</p>
                                                <div className="bg-white/[0.05] rounded-xl p-5 border border-white/5">
                                                    <div className="flex items-center gap-2 mb-3 text-white">
                                                        <Icon name="lightbulb" className="w-3 h-3 text-white" />
                                                        <span className="text-[9px] font-bold uppercase tracking-widest">Analisis Psikologis</span>
                                                    </div>
                                                    <p className="text-white/80 text-[11px] text-justify-custom font-normal leading-relaxed italic">{String(item.analysis)}</p>
                                                </div>
                                                <div className="mt-8 flex justify-end opacity-0 group-hover:opacity-100 transition-all">
                                                    <button onClick={() => handleCopy(String(item.text), i)} className={`text-[9px] font-bold flex items-center gap-2 px-6 py-2 rounded-xl uppercase tracking-widest transition-all ${copiedIdx === i ? 'bg-white text-black' : 'bg-white/10 text-white hover:bg-white hover:text-black'}`}>
                                                        {copiedIdx === i ? <Fragment><Icon name="check" className="w-3 h-3" /> Tersalin!</Fragment> : <Fragment><Icon name="copy" className="w-3 h-3" /> Salin Teks</Fragment>}
                                                    </button>
                                                </div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            </div>
                        </div>
                    </main>

                    {/* TOAST NOTIFICATION */}
                    {toast.show && (
                        <div className="fixed bottom-10 left-1/2 -translate-x-1/2 z-[200] toast-active">
                            <div className="bg-red-600 text-white px-8 py-4 rounded-2xl shadow-2xl flex items-center gap-4 border border-white/20">
                                <Icon name="alert" className="w-5 h-5 text-white" />
                                <p className="text-sm font-bold tracking-tight">{toast.message}</p>
                            </div>
                        </div>
                    )}

                    <footer className="p-10 text-center opacity-40 border-t border-white/5">
                        <p className="text-[8px] uppercase tracking-[0.5em] font-bold text-white">CopyGen Pro Engine • Professional Grade • Made by ProSbe</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
